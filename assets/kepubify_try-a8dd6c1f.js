var kepubify_try=function(e){"use strict";var extendStatics$1=function(e,t){return(extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends$1(e,t){function __(){this.constructor=e}extendStatics$1(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var t,__assign$3=function(){return(__assign$3=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __values$2(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$4(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function __spread$4(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$4(arguments[t]));return e}function __read$3(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function __spread$3(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$3(arguments[t]));return e}!function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(t||(t={}));var __assign$2=function(){return(__assign$2=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __read$2(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function __spread$2(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$2(arguments[t]));return e}function isDebugBuild(){return"undefined"!=typeof __SENTRY_NO_DEBUG__&&!__SENTRY_BROWSER_BUNDLE__}function isNodeEnv(){return!function isBrowserBundle(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}var n={};function getGlobalObject(){return isNodeEnv()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:n}var r=Object.prototype.toString;function isError(e){switch(r.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(e,Error)}}function isBuiltin(e,t){return r.call(e)==="[object "+t+"]"}function isErrorEvent(e){return isBuiltin(e,"ErrorEvent")}function isDOMError(e){return isBuiltin(e,"DOMError")}function isString(e){return isBuiltin(e,"String")}function isPrimitive(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function isPlainObject(e){return isBuiltin(e,"Object")}function isEvent(e){return"undefined"!=typeof Event&&isInstanceOf(e,Event)}function isElement(e){return"undefined"!=typeof Element&&isInstanceOf(e,Element)}function isThenable(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function isInstanceOf(e,t){try{return e instanceof t}catch(e){return!1}}function htmlTreeAsString(e,t){try{for(var n=e,r=[],i=0,o=0,s=" > ".length,a=void 0;n&&i++<5&&!("html"===(a=_htmlElementAsString(n,t))||i>1&&o+r.length*s+a.length>=80);)r.push(a),o+=a.length,n=n.parentNode;return r.reverse().join(" > ")}catch(e){return"<unknown>"}}function _htmlElementAsString(e,t){var n,r,i,o,s,a=e,c=[];if(!a||!a.tagName)return"";c.push(a.tagName.toLowerCase());var u=t&&t.length?t.filter((function(e){return a.getAttribute(e)})).map((function(e){return[e,a.getAttribute(e)]})):null;if(u&&u.length)u.forEach((function(e){c.push("["+e[0]+'="'+e[1]+'"]')}));else if(a.id&&c.push("#"+a.id),(n=a.className)&&isString(n))for(r=n.split(/\s+/),s=0;s<r.length;s++)c.push("."+r[s]);var l=["type","name","title","alt"];for(s=0;s<l.length;s++)i=l[s],(o=a.getAttribute(i))&&c.push("["+i+'="'+o+'"]');return c.join("")}var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var __assign$1=function(){return(__assign$1=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __values$1(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function __spread$1(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$1(arguments[t]));return e}var i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function setProtoOf(e,t){return e.__proto__=t,e}:function mixinProperties(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n]);return e});var o=function(e){function SentryError(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,i(r,n.prototype),r}return function __extends(e,t){function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}(SentryError,e),SentryError}(Error),s=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function dsnToString(e,t){void 0===t&&(t=!1);var n=e.host,r=e.path,i=e.pass,o=e.port,s=e.projectId;return e.protocol+"://"+e.publicKey+(t&&i?":"+i:"")+"@"+n+(o?":"+o:"")+"/"+(r?r+"/":r)+s}function dsnFromComponents(e){return"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),{user:e.publicKey||"",protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function makeDsn(e){var t="string"==typeof e?function dsnFromString(e){var t=s.exec(e);if(!t)throw new o("Invalid Sentry Dsn: "+e);var n=__read$1(t.slice(1),6),r=n[0],i=n[1],a=n[2],c=void 0===a?"":a,u=n[3],l=n[4],p=void 0===l?"":l,d="",f=n[5],h=f.split("/");if(h.length>1&&(d=h.slice(0,-1).join("/"),f=h.pop()),f){var v=f.match(/^\d+/);v&&(f=v[0])}return dsnFromComponents({host:u,pass:c,path:d,projectId:f,port:p,protocol:r,publicKey:i})}(e):dsnFromComponents(e);return function validateDsn(e){if(isDebugBuild()){var t=e.port,n=e.projectId,r=e.protocol;if(["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t])throw new o("Invalid Sentry Dsn: "+t+" missing")})),!n.match(/^\d+$/))throw new o("Invalid Sentry Dsn: Invalid projectId "+n);if(!function isValidProtocol(e){return"http"===e||"https"===e}(r))throw new o("Invalid Sentry Dsn: Invalid protocol "+r);if(t&&isNaN(parseInt(t,10)))throw new o("Invalid Sentry Dsn: Invalid port "+t);return!0}}(t),t}var a=["fatal","error","warning","log","info","debug","critical"],c=getGlobalObject(),u="Sentry Logger ";function consoleSandbox(e){var t=getGlobalObject();if(!("console"in t))return e();var n=t.console,r={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(r[e]=n[e],n[e]=n[e].__sentry_original__)}));var i=e();return Object.keys(r).forEach((function(e){n[e]=r[e]})),i}var l=function(){function Logger(){this._enabled=!1}return Logger.prototype.disable=function(){this._enabled=!1},Logger.prototype.enable=function(){this._enabled=!0},Logger.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&consoleSandbox((function(){var t;(t=c.console).log.apply(t,__spread$1([u+"[Log]:"],e))}))},Logger.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&consoleSandbox((function(){var t;(t=c.console).warn.apply(t,__spread$1([u+"[Warn]:"],e))}))},Logger.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&consoleSandbox((function(){var t;(t=c.console).error.apply(t,__spread$1([u+"[Error]:"],e))}))},Logger}();c.__SENTRY__=c.__SENTRY__||{};var p=c.__SENTRY__.logger||(c.__SENTRY__.logger=new l);function stripSentryFramesAndReverse(e){if(!e.length)return[];var t=e,n=t[0].function||"",r=t[t.length-1].function||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return __assign$1(__assign$1({},e),{filename:e.filename||t[0].filename,function:e.function||"?"})})).reverse()}var d="<anonymous>";function getFunctionName(e){try{return e&&"function"==typeof e&&e.name||d}catch(e){return d}}function truncate(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function safeJoin(e,t){if(!Array.isArray(e))return"";for(var n=[],r=0;r<e.length;r++){var i=e[r];try{n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function isMatchingPattern(e,t){return!!isString(e)&&(function isRegExp(e){return isBuiltin(e,"RegExp")}(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}function fill(e,t,n){if(t in e){var r=e[t],i=n(r);if("function"==typeof i)try{markFunctionWrapped(i,r)}catch(e){}e[t]=i}}function addNonEnumerableProperty(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function markFunctionWrapped(e,t){var n=t.prototype||{};e.prototype=t.prototype=n,addNonEnumerableProperty(e,"__sentry_original__",t)}function getOriginalFunction(e){return e.__sentry_original__}function getWalkSource(e){if(isError(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(isEvent(e)){var i=e,o={};o.type=i.type;try{o.target=isElement(i.target)?htmlTreeAsString(i.target):Object.prototype.toString.call(i.target)}catch(e){o.target="<unknown>"}try{o.currentTarget=isElement(i.currentTarget)?htmlTreeAsString(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(e){o.currentTarget="<unknown>"}for(var s in"undefined"!=typeof CustomEvent&&isInstanceOf(e,CustomEvent)&&(o.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,s)&&(o[s]=i[s]);return o}return e}function jsonSize(e){return function utf8Length(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function normalizeToSize(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var r=normalize(e,t);return jsonSize(r)>n?normalizeToSize(e,t-1,n):r}function makeSerializable(e,t){return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":"undefined"!=typeof global&&e===global?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":function isSyntheticEvent(e){return isPlainObject(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(e)?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+getFunctionName(e)+"]":"symbol"==typeof e?"["+String(e)+"]":"bigint"==typeof e?"[BigInt: "+String(e)+"]":e}function walk(e,t,n,r){void 0===n&&(n=1/0),void 0===r&&(r=function memoBuilder(){var e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function memoize(n){if(e)return!!t.has(n)||(t.add(n),!1);for(var r=0;r<t.length;r++)if(t[r]===n)return!0;return t.push(n),!1},function unmemoize(n){if(e)t.delete(n);else for(var r=0;r<t.length;r++)if(t[r]===n){t.splice(r,1);break}}]}());var i=__read$1(r,2),o=i[0],s=i[1];if(0===n)return function serializeValue(e){if("string"==typeof e)return e;var t=Object.prototype.toString.call(e);if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=makeSerializable(e);return isPrimitive(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var a=makeSerializable(t,e);if(isPrimitive(a))return a;var c=getWalkSource(t),u=Array.isArray(t)?[]:{};if(o(t))return"[Circular ~]";for(var l in c)if(Object.prototype.hasOwnProperty.call(c,l)){var p=c[l];u[l]=walk(l,p,n-1,r)}return s(t),u}function normalize(e,t){try{return walk("",e,t)}catch(e){return"**non-serializable**"}}function extractExceptionKeysForMessage(e,t){void 0===t&&(t=40);var n=Object.keys(getWalkSource(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return truncate(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:truncate(i,t)}return""}function dropUndefinedKeys(e){var t,n;if(isPlainObject(e)){var r=e,i={};try{for(var o=__values$1(Object.keys(r)),s=o.next();!s.done;s=o.next()){var a=s.value;void 0!==r[a]&&(i[a]=dropUndefinedKeys(r[a]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(dropUndefinedKeys):e}function supportsFetch(){if(!("fetch"in getGlobalObject()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function isNativeFetch(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function supportsReferrerPolicy(){if(!supportsFetch())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}var f,h=getGlobalObject(),v={},_={};function instrument(e){if(!_[e])switch(_[e]=!0,e){case"console":!function instrumentConsole(){if(!("console"in h))return;["debug","info","warn","error","log","assert"].forEach((function(e){e in h.console&&fill(h.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];triggerHandlers("console",{args:n,level:e}),t&&t.apply(h.console,n)}}))}))}();break;case"dom":!function instrumentDOM(){if(!("document"in h))return;var e=triggerHandlers.bind(null,"dom"),t=makeDOMEventHandler(e,!0);h.document.addEventListener("click",t,!1),h.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var n=h[t]&&h[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(fill(n,"addEventListener",(function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{var o=this,s=o.__sentry_instrumentation_handlers__=o.__sentry_instrumentation_handlers__||{},a=s[n]=s[n]||{refCount:0};if(!a.handler){var c=makeDOMEventHandler(e);a.handler=c,t.call(this,n,c,i)}a.refCount+=1}catch(e){}return t.call(this,n,r,i)}})),fill(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var i=this,o=i.__sentry_instrumentation_handlers__||{},s=o[t];s&&(s.refCount-=1,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete i.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function instrumentXHR(){if(!("XMLHttpRequest"in h))return;var e=XMLHttpRequest.prototype;fill(e,"open",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,i=t[1],o=r.__sentry_xhr__={method:isString(t[0])?t[0].toUpperCase():t[0],url:t[1]};isString(i)&&"POST"===o.method&&i.match(/sentry_key/)&&(r.__sentry_own_request__=!0);var onreadystatechangeHandler=function(){if(4===r.readyState){try{o.status_code=r.status}catch(e){}triggerHandlers("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}};return"onreadystatechange"in r&&"function"==typeof r.onreadystatechange?fill(r,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return onreadystatechangeHandler(),e.apply(r,t)}})):r.addEventListener("readystatechange",onreadystatechangeHandler),e.apply(r,t)}})),fill(e,"send",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.__sentry_xhr__&&void 0!==t[0]&&(this.__sentry_xhr__.body=t[0]),triggerHandlers("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":!function instrumentFetch(){if(!function supportsNativeFetch(){if(!supportsFetch())return!1;var e=getGlobalObject();if(isNativeFetch(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=isNativeFetch(r.contentWindow.fetch)),n.head.removeChild(r)}catch(e){isDebugBuild()&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}())return;fill(h,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:getFetchMethod(t),url:getFetchUrl(t)},startTimestamp:Date.now()};return triggerHandlers("fetch",__assign$1({},r)),e.apply(h,t).then((function(e){return triggerHandlers("fetch",__assign$1(__assign$1({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw triggerHandlers("fetch",__assign$1(__assign$1({},r),{endTimestamp:Date.now(),error:e})),e}))}}))}();break;case"history":!function instrumentHistory(){if(!function supportsHistory(){var e=getGlobalObject(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}())return;var e=h.onpopstate;function historyReplacementFunction(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length>2?t[2]:void 0;if(r){var i=f,o=String(r);f=o,triggerHandlers("history",{from:i,to:o})}return e.apply(this,t)}}h.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=h.location.href,i=f;if(f=r,triggerHandlers("history",{from:i,to:r}),e)try{return e.apply(this,t)}catch(e){}},fill(h.history,"pushState",historyReplacementFunction),fill(h.history,"replaceState",historyReplacementFunction)}();break;case"error":!function instrumentError(){m=h.onerror,h.onerror=function(e,t,n,r,i){return triggerHandlers("error",{column:r,error:i,line:n,msg:e,url:t}),!!m&&m.apply(this,arguments)}}();break;case"unhandledrejection":!function instrumentUnhandledRejection(){b=h.onunhandledrejection,h.onunhandledrejection=function(e){return triggerHandlers("unhandledrejection",e),!b||b.apply(this,arguments)}}();break;default:p.warn("unknown instrumentation type:",e)}}function addInstrumentationHandler(e,t){v[e]=v[e]||[],v[e].push(t),instrument(e)}function triggerHandlers(e,t){var n,r;if(e&&v[e])try{for(var i=__values$1(v[e]||[]),o=i.next();!o.done;o=i.next()){var s=o.value;try{s(t)}catch(t){isDebugBuild()&&p.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+getFunctionName(s)+"\nError:",t)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function getFetchMethod(e){return void 0===e&&(e=[]),"Request"in h&&isInstanceOf(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function getFetchUrl(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in h&&isInstanceOf(e[0],Request)?e[0].url:String(e[0])}var g,y;function makeDOMEventHandler(e,t){return void 0===t&&(t=!1),function(n){if(n&&y!==n&&!function shouldSkipDOMEvent(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===g||function shouldShortcircuitPreviousDebounce(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(y,n))&&(e({event:n,name:r,global:t}),y=n),clearTimeout(g),g=h.setTimeout((function(){g=void 0}),1e3)}}}var m=null;var b=null;function uuid4(){var e=getGlobalObject(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var pad=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return pad(n[0])+pad(n[1])+pad(n[2])+pad(n[3])+pad(n[4])+pad(n[5])+pad(n[6])+pad(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function parseUrl(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function getFirstException(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function getEventDescription(e){var t=e.message,n=e.event_id;if(t)return t;var r=getFirstException(e);return r?r.type&&r.value?r.type+": "+r.value:r.type||r.value||n||"<unknown>":n||"<unknown>"}function addExceptionTypeValue(e,t,n){var r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function addExceptionMechanism(e,t){var n=getFirstException(e);if(n){var r=n.mechanism;if(n.mechanism=__assign$1(__assign$1(__assign$1({},{type:"generic",handled:!0}),r),t),t&&"data"in t){var i=__assign$1(__assign$1({},r&&r.data),t.data);n.mechanism.data=i}}}function checkOrSetAlreadyCaught(e){if(e&&e.__sentry_captured__)return!0;try{addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(e){}return!1}function resolvedSyncPromise(e){return new E((function(t){t(e)}))}function rejectedSyncPromise(e){return new E((function(t,n){n(e)}))}var E=function(){function SyncPromise(e){var t=this;this._state=0,this._handlers=[],this._resolve=function(e){t._setResult(1,e)},this._reject=function(e){t._setResult(2,e)},this._setResult=function(e,n){0===t._state&&(isThenable(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._executeHandlers=function(){if(0!==t._state){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e[0]||(1===t._state&&e[1](t._value),2===t._state&&e[2](t._value),e[0]=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return SyncPromise.prototype.then=function(e,t){var n=this;return new SyncPromise((function(r,i){n._handlers.push([!1,function(t){if(e)try{r(e(t))}catch(e){i(e)}else r(t)},function(e){if(t)try{r(t(e))}catch(e){i(e)}else i(e)}]),n._executeHandlers()}))},SyncPromise.prototype.catch=function(e){return this.then((function(e){return e}),e)},SyncPromise.prototype.finally=function(e){var t=this;return new SyncPromise((function(n,r){var i,o;return t.then((function(t){o=!1,i=t,e&&e()}),(function(t){o=!0,i=t,e&&e()})).then((function(){o?r(i):n(i)}))}))},SyncPromise}();function makePromiseBuffer(e){var t=[];function remove(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function add(n){if(!function isReady(){return void 0===e||t.length<e}())return rejectedSyncPromise(new o("Not adding Promise due to buffer limit reached."));var r=n();return-1===t.indexOf(r)&&t.push(r),r.then((function(){return remove(r)})).then(null,(function(){return remove(r).then(null,(function(){}))})),r},drain:function drain(e){return new E((function(n,r){var i=t.length;if(!i)return n(!0);var o=setTimeout((function(){e&&e>0&&n(!1)}),e);t.forEach((function(e){resolvedSyncPromise(e).then((function(){--i||(clearTimeout(o),n(!0))}),r)}))}))}}}function severityFromString(e){return"warn"===e?t.Warning:function isSupportedSeverity(e){return-1!==a.indexOf(e)}(e)?e:t.Log}var S={nowSeconds:function(){return Date.now()/1e3}};var w=isNodeEnv()?function getNodePerformance(){try{return function dynamicRequire(e,t){return e.require(t)}(module,"perf_hooks").performance}catch(e){return}}():function getBrowserPerformance(){var e=getGlobalObject().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),x=void 0===w?S:{nowSeconds:function(){return(w.timeOrigin+w.now())/1e3}},k=S.nowSeconds.bind(S),O=x.nowSeconds.bind(x);function createEnvelope(e,t){return void 0===t&&(t=[]),[e,t]}function serializeEnvelope(e){var t=__read$1(e,2),n=t[0],r=t[1],i=JSON.stringify(n);return r.reduce((function(e,t){var n=__read$1(t,2),r=n[0],i=n[1],o=isPrimitive(i)?String(i):JSON.stringify(i);return e+"\n"+JSON.stringify(r)+"\n"+o}),i)}!function(){var e=getGlobalObject().performance;if(e&&e.now){var t=36e5,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=i<t,s=e.timing&&e.timing.navigationStart,a="number"==typeof s?Math.abs(s+n-r):t;(o||a<t)&&(i<=a&&e.timeOrigin)}}();var T=function(){function Scope(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return Scope.clone=function(e){var t=new Scope;return e&&(t._breadcrumbs=__spread$2(e._breadcrumbs),t._tags=__assign$2({},e._tags),t._extra=__assign$2({},e._extra),t._contexts=__assign$2({},e._contexts),t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=__spread$2(e._eventProcessors),t._requestSession=e._requestSession),t},Scope.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},Scope.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},Scope.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},Scope.prototype.getUser=function(){return this._user},Scope.prototype.getRequestSession=function(){return this._requestSession},Scope.prototype.setRequestSession=function(e){return this._requestSession=e,this},Scope.prototype.setTags=function(e){return this._tags=__assign$2(__assign$2({},this._tags),e),this._notifyScopeListeners(),this},Scope.prototype.setTag=function(e,t){var n;return this._tags=__assign$2(__assign$2({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},Scope.prototype.setExtras=function(e){return this._extra=__assign$2(__assign$2({},this._extra),e),this._notifyScopeListeners(),this},Scope.prototype.setExtra=function(e,t){var n;return this._extra=__assign$2(__assign$2({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},Scope.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},Scope.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},Scope.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},Scope.prototype.setTransaction=function(e){return this.setTransactionName(e)},Scope.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=__assign$2(__assign$2({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},Scope.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},Scope.prototype.getSpan=function(){return this._span},Scope.prototype.getTransaction=function(){var e=this.getSpan();return e&&e.transaction},Scope.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},Scope.prototype.getSession=function(){return this._session},Scope.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var t=e(this);return t instanceof Scope?t:this}return e instanceof Scope?(this._tags=__assign$2(__assign$2({},this._tags),e._tags),this._extra=__assign$2(__assign$2({},this._extra),e._extra),this._contexts=__assign$2(__assign$2({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):isPlainObject(e)&&(e=e,this._tags=__assign$2(__assign$2({},this._tags),e.tags),this._extra=__assign$2(__assign$2({},this._extra),e.extra),this._contexts=__assign$2(__assign$2({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},Scope.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},Scope.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var r=__assign$2({timestamp:k()},e);return this._breadcrumbs=__spread$2(this._breadcrumbs,[r]).slice(-n),this._notifyScopeListeners(),this},Scope.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},Scope.prototype.applyToEvent=function(e,t){if(this._extra&&Object.keys(this._extra).length&&(e.extra=__assign$2(__assign$2({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=__assign$2(__assign$2({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=__assign$2(__assign$2({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=__assign$2(__assign$2({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=__assign$2({trace:this._span.getTraceContext()},e.contexts);var n=this._span.transaction&&this._span.transaction.name;n&&(e.tags=__assign$2({transaction:n},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=__spread$2(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(__spread$2(getGlobalEventProcessors(),this._eventProcessors),e,t)},Scope.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=__assign$2(__assign$2({},this._sdkProcessingMetadata),e),this},Scope.prototype._notifyEventProcessors=function(e,t,n,r){var i=this;return void 0===r&&(r=0),new E((function(o,s){var a=e[r];if(null===t||"function"!=typeof a)o(t);else{var c=a(__assign$2({},t),n);isThenable(c)?c.then((function(t){return i._notifyEventProcessors(e,t,n,r+1).then(o)})).then(null,s):i._notifyEventProcessors(e,c,n,r+1).then(o).then(null,s)}}))},Scope.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},Scope.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},Scope}();function getGlobalEventProcessors(){var e=getGlobalObject();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function addGlobalEventProcessor(e){getGlobalEventProcessors().push(e)}var F=function(){function Session(e){this.errors=0,this.sid=uuid4(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var t=O();this.timestamp=t,this.started=t,e&&this.update(e)}return Session.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||O(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:uuid4()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},Session.prototype.close=function(e){e?this.update({status:e}):"ok"===this.status?this.update({status:"exited"}):this.update()},Session.prototype.toJSON=function(){return dropUndefinedKeys({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},Session}(),C=function(){function Hub(e,t,n){void 0===t&&(t=new T),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return Hub.prototype.isOlderThan=function(e){return this._version<e},Hub.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},Hub.prototype.pushScope=function(){var e=T.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},Hub.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},Hub.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},Hub.prototype.getClient=function(){return this.getStackTop().client},Hub.prototype.getScope=function(){return this.getStackTop().scope},Hub.prototype.getStack=function(){return this._stack},Hub.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},Hub.prototype.captureException=function(e,t){var n=this._lastEventId=t&&t.event_id?t.event_id:uuid4(),r=t;if(!t){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(e){i=e}r={originalException:e,syntheticException:i}}return this._invokeClient("captureException",e,__assign$2(__assign$2({},r),{event_id:n})),n},Hub.prototype.captureMessage=function(e,t,n){var r=this._lastEventId=n&&n.event_id?n.event_id:uuid4(),i=n;if(!n){var o=void 0;try{throw new Error(e)}catch(e){o=e}i={originalException:e,syntheticException:o}}return this._invokeClient("captureMessage",e,t,__assign$2(__assign$2({},i),{event_id:r})),r},Hub.prototype.captureEvent=function(e,t){var n=t&&t.event_id?t.event_id:uuid4();return"transaction"!==e.type&&(this._lastEventId=n),this._invokeClient("captureEvent",e,__assign$2(__assign$2({},t),{event_id:n})),n},Hub.prototype.lastEventId=function(){return this._lastEventId},Hub.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),r=n.scope,i=n.client;if(r&&i){var o=i.getOptions&&i.getOptions()||{},s=o.beforeBreadcrumb,a=void 0===s?null:s,c=o.maxBreadcrumbs,u=void 0===c?100:c;if(!(u<=0)){var l=k(),p=__assign$2({timestamp:l},e),d=a?consoleSandbox((function(){return a(p,t)})):p;null!==d&&r.addBreadcrumb(d,u)}}},Hub.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},Hub.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},Hub.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},Hub.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},Hub.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},Hub.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},Hub.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},Hub.prototype.run=function(e){var t=makeMain(this);try{e(this)}finally{makeMain(t)}},Hub.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return p.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},Hub.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},Hub.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},Hub.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},Hub.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},Hub.prototype.endSession=function(){var e=this.getStackTop(),t=e&&e.scope,n=t&&t.getSession();n&&n.close(),this._sendSessionUpdate(),t&&t.setSession()},Hub.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,r=t.client,i=r&&r.getOptions()||{},o=i.release,s=i.environment,a=(getGlobalObject().navigator||{}).userAgent,c=new F(__assign$2(__assign$2(__assign$2({release:o,environment:s},n&&{user:n.getUser()}),a&&{userAgent:a}),e));if(n){var u=n.getSession&&n.getSession();u&&"ok"===u.status&&u.update({status:"exited"}),this.endSession(),n.setSession(c)}return c},Hub.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},Hub.prototype._invokeClient=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.getStackTop(),o=i.scope,s=i.client;s&&s[e]&&(t=s)[e].apply(t,__spread$2(n,[o]))},Hub.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=getMainCarrier(),i=r.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);p.warn("Extension method "+e+" couldn't be found, doing nothing.")},Hub}();function getMainCarrier(){var e=getGlobalObject();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function makeMain(e){var t=getMainCarrier(),n=getHubFromCarrier(t);return setHubOnCarrier(t,e),n}function getCurrentHub(){var e=getMainCarrier();return hasHubOnCarrier(e)&&!getHubFromCarrier(e).isOlderThan(4)||setHubOnCarrier(e,new C),isNodeEnv()?function getHubFromActiveDomain(e){try{var t=getMainCarrier().__SENTRY__,n=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!n)return getHubFromCarrier(e);if(!hasHubOnCarrier(n)||getHubFromCarrier(n).isOlderThan(4)){var r=getHubFromCarrier(e).getStackTop();setHubOnCarrier(n,new C(r.client,T.clone(r.scope)))}return getHubFromCarrier(n)}catch(t){return getHubFromCarrier(e)}}(e):getHubFromCarrier(e)}function hasHubOnCarrier(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function getHubFromCarrier(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new C),e.__SENTRY__.hub}function setHubOnCarrier(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}function callOnHub(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=getCurrentHub();if(r&&r[e])return r[e].apply(r,__spread$3(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function captureException(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return callOnHub("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function addBreadcrumb(e){callOnHub("addBreadcrumb",e)}function withScope(e){callOnHub("withScope",e)}function getBaseApiEndpoint(e){var t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"}function _getIngestEndpoint(e,t){return""+getBaseApiEndpoint(e)+e.projectId+"/"+t+"/"}function _encodedAuth(e){return function urlEncode(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}({sentry_key:e.publicKey,sentry_version:"7"})}function getStoreEndpointWithUrlEncodedAuth(e){return function getStoreEndpoint(e){return _getIngestEndpoint(e,"store")}(e)+"?"+_encodedAuth(e)}function getEnvelopeEndpointWithUrlEncodedAuth(e,t){return t||function _getEnvelopeEndpoint(e){return _getIngestEndpoint(e,"envelope")}(e)+"?"+_encodedAuth(e)}var __assign=function(){return(__assign=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}var P=[];function filterDuplicates(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}function setupIntegrations(e){var t={};return function getIntegrationsToSetup(e){var t=e.defaultIntegrations&&__spread(e.defaultIntegrations)||[],n=e.integrations,r=__spread(filterDuplicates(t));Array.isArray(n)?r=__spread(r.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),filterDuplicates(n)):"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var i=r.map((function(e){return e.name})),o="Debug";return-1!==i.indexOf(o)&&r.push.apply(r,__spread(r.splice(i.indexOf(o),1))),r}(e).forEach((function(e){t[e.name]=e,function setupIntegration(e){-1===P.indexOf(e.name)&&(e.setupOnce(addGlobalEventProcessor,getCurrentHub),P.push(e.name),p.log("Integration installed: "+e.name))}(e)})),addNonEnumerableProperty(t,"initialized",!0),t}var B="Not capturing exception because it's already been captured.",j=function(){function BaseClient(e,t){this._integrations={},this._numProcessing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=makeDsn(t.dsn))}return BaseClient.prototype.captureException=function(e,t,n){var r=this;if(!checkOrSetAlreadyCaught(e)){var i=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){i=e}))),i}p.log(B)},BaseClient.prototype.captureMessage=function(e,t,n,r){var i=this,o=n&&n.event_id,s=isPrimitive(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(s.then((function(e){return i._captureEvent(e,n,r)})).then((function(e){o=e}))),o},BaseClient.prototype.captureEvent=function(e,t,n){if(!(t&&t.originalException&&checkOrSetAlreadyCaught(t.originalException))){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e}))),r}p.log(B)},BaseClient.prototype.captureSession=function(e){this._isEnabled()?"string"!=typeof e.release?isDebugBuild()&&p.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1})):isDebugBuild()&&p.warn("SDK not enabled, will not capture session.")},BaseClient.prototype.getDsn=function(){return this._dsn},BaseClient.prototype.getOptions=function(){return this._options},BaseClient.prototype.getTransport=function(){return this._getBackend().getTransport()},BaseClient.prototype.flush=function(e){var t=this;return this._isClientDoneProcessing(e).then((function(n){return t.getTransport().close(e).then((function(e){return n&&e}))}))},BaseClient.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},BaseClient.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=setupIntegrations(this._options))},BaseClient.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return p.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},BaseClient.prototype._updateSessionFromEvent=function(e,t){var n,r,i=!1,o=!1,s=t.exception&&t.exception.values;if(s){o=!0;try{for(var a=function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),c=a.next();!c.done;c=a.next()){var u=c.value.mechanism;if(u&&!1===u.handled){i=!0;break}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}var l="ok"===e.status;(l&&0===e.errors||l&&i)&&(e.update(__assign(__assign({},i&&{status:"crashed"}),{errors:e.errors||Number(o||i)})),this.captureSession(e))},BaseClient.prototype._sendSession=function(e){this._getBackend().sendSession(e)},BaseClient.prototype._isClientDoneProcessing=function(e){var t=this;return new E((function(n){var r=0,i=setInterval((function(){0==t._numProcessing?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))}),1)}))},BaseClient.prototype._getBackend=function(){return this._backend},BaseClient.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},BaseClient.prototype._prepareEvent=function(e,t,n){var r=this,i=this.getOptions().normalizeDepth,o=void 0===i?3:i,s=__assign(__assign({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:uuid4()),timestamp:e.timestamp||k()});this._applyClientOptions(s),this._applyIntegrationsMetadata(s);var a=t;n&&n.captureContext&&(a=T.clone(a).update(n.captureContext));var c=resolvedSyncPromise(s);return a&&(c=a.applyToEvent(s,n)),c.then((function(e){return e&&(e.sdkProcessingMetadata=__assign(__assign({},e.sdkProcessingMetadata),{normalizeDepth:normalize(o)})),"number"==typeof o&&o>0?r._normalizeEvent(e,o):e}))},BaseClient.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=__assign(__assign(__assign(__assign(__assign({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return __assign(__assign({},e),e.data&&{data:normalize(e.data,t)})}))}),e.user&&{user:normalize(e.user,t)}),e.contexts&&{contexts:normalize(e.contexts,t)}),e.extra&&{extra:normalize(e.extra,t)});return e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace),e.sdkProcessingMetadata=__assign(__assign({},e.sdkProcessingMetadata),{baseClientNormalized:!0}),n},BaseClient.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,i=t.dist,o=t.maxValueLength,s=void 0===o?250:o;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=truncate(e.message,s));var a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=truncate(a.value,s));var c=e.request;c&&c.url&&(c.url=truncate(c.url,s))},BaseClient.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=__spread(e.sdk.integrations||[],t))},BaseClient.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},BaseClient.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){p.error(e)}))},BaseClient.prototype._processEvent=function(e,t,n){var r=this,i=this.getOptions(),s=i.beforeSend,a=i.sampleRate,c=this.getTransport();function recordLostEvent(e,t){c.recordLostEvent&&c.recordLostEvent(e,t)}if(!this._isEnabled())return rejectedSyncPromise(new o("SDK not enabled, will not capture event."));var u="transaction"===e.type;return!u&&"number"==typeof a&&Math.random()>a?(recordLostEvent("sample_rate","event"),rejectedSyncPromise(new o("Discarding event because it's not included in the random sample (sampling rate = "+a+")"))):this._prepareEvent(e,n,t).then((function(n){if(null===n)throw recordLostEvent("event_processor",e.type||"event"),new o("An event processor returned null, will not send event.");return t&&t.data&&!0===t.data.__sentry__||u||!s?n:function _ensureBeforeSendRv(e){var t="`beforeSend` method has to return `null` or a valid event.";if(isThenable(e))return e.then((function(e){if(!isPlainObject(e)&&null!==e)throw new o(t);return e}),(function(e){throw new o("beforeSend rejected with "+e)}));if(!isPlainObject(e)&&null!==e)throw new o(t);return e}(s(n,t))})).then((function(t){if(null===t)throw recordLostEvent("before_send",e.type||"event"),new o("`beforeSend` returned `null`, will not send event.");var i=n&&n.getSession&&n.getSession();return!u&&i&&r._updateSessionFromEvent(i,t),r._sendEvent(t),t})).then(null,(function(e){if(e instanceof o)throw e;throw r.captureException(e,{data:{__sentry__:!0},originalException:e}),new o("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},BaseClient.prototype._process=function(e){var t=this;this._numProcessing+=1,e.then((function(e){return t._numProcessing-=1,e}),(function(e){return t._numProcessing-=1,e}))},BaseClient}();var R=function(){function NoopTransport(){}return NoopTransport.prototype.sendEvent=function(e){return resolvedSyncPromise({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:"skipped"})},NoopTransport.prototype.close=function(e){return resolvedSyncPromise(!0)},NoopTransport}(),D=function(){function BaseBackend(e){this._options=e,this._options.dsn||p.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return BaseBackend.prototype.eventFromException=function(e,t){throw new o("Backend has to implement `eventFromException` method")},BaseBackend.prototype.eventFromMessage=function(e,t,n){throw new o("Backend has to implement `eventFromMessage` method")},BaseBackend.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){isDebugBuild()&&p.error("Error while sending event:",e)}))},BaseBackend.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){isDebugBuild()&&p.error("Error while sending session:",e)})):isDebugBuild()&&p.warn("Dropping session because custom transport doesn't implement sendSession")},BaseBackend.prototype.getTransport=function(){return this._transport},BaseBackend.prototype._setupTransport=function(){return new R},BaseBackend}();function getSdkMetadataForEnvelopeHeader(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function eventToSentryRequest(e,t){var n,r=getSdkMetadataForEnvelopeHeader(t),i=e.type||"event",o="transaction"===i||!!t.tunnel,s=(e.sdkProcessingMetadata||{}).transactionSampling||{},a=s.method,c=s.rate;!function enhanceEventWithSdkInfo(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=__spread(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=__spread(e.sdk.packages||[],t.packages||[]),e):e}(e,t.metadata.sdk),e.tags=e.tags||{},e.extra=e.extra||{},e.sdkProcessingMetadata&&e.sdkProcessingMetadata.baseClientNormalized||(e.tags.skippedNormalization=!0,e.extra.normalizeDepth=e.sdkProcessingMetadata?e.sdkProcessingMetadata.normalizeDepth:"unset"),delete e.sdkProcessingMetadata;try{n=JSON.stringify(e)}catch(t){e.tags.JSONStringifyError=!0,e.extra.JSONStringifyError=t;try{n=JSON.stringify(normalize(e))}catch(e){var u=e;n=JSON.stringify({message:"JSON.stringify error after renormalization",extra:{message:u.message,stack:u.stack}})}}var l={body:n,type:i,url:o?getEnvelopeEndpointWithUrlEncodedAuth(t.dsn,t.tunnel):getStoreEndpointWithUrlEncodedAuth(t.dsn)};if(o){var p=createEnvelope(__assign(__assign({event_id:e.event_id,sent_at:(new Date).toISOString()},r&&{sdk:r}),!!t.tunnel&&{dsn:dsnToString(t.dsn)}),[[{type:i,sample_rates:[{id:a,rate:c}]},l.body]]);l.body=serializeEnvelope(p)}return l}var H,I="6.18.2",L=function(){function FunctionToString(){this.name=FunctionToString.id}return FunctionToString.prototype.setupOnce=function(){H=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=getOriginalFunction(this)||this;return H.apply(n,e)}},FunctionToString.id="FunctionToString",FunctionToString}(),N=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],A=function(){function InboundFilters(e){void 0===e&&(e={}),this._options=e,this.name=InboundFilters.id}return InboundFilters.prototype.setupOnce=function(){addGlobalEventProcessor((function(e){var t=getCurrentHub();if(!t)return e;var n=t.getIntegration(InboundFilters);if(n){var r=t.getClient(),i=r?r.getOptions():{},o="function"==typeof n._mergeOptions?n._mergeOptions(i):{};return"function"!=typeof n._shouldDropEvent?e:n._shouldDropEvent(e,o)?null:e}return e}))},InboundFilters.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(isDebugBuild()&&p.warn("Event dropped due to being internal Sentry Error.\nEvent: "+getEventDescription(e)),!0):this._isIgnoredError(e,t)?(isDebugBuild()&&p.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+getEventDescription(e)),!0):this._isDeniedUrl(e,t)?(isDebugBuild()&&p.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(isDebugBuild()&&p.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},InboundFilters.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1},InboundFilters.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return isMatchingPattern(e,t)}))}))},InboundFilters.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return isMatchingPattern(n,e)}))},InboundFilters.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return isMatchingPattern(n,e)}))},InboundFilters.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:__spread(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:__spread(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:__spread(this._options.ignoreErrors||[],e.ignoreErrors||[],N),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},InboundFilters.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,i=t.value,o=void 0===i?"":i;return[""+o,r+": "+o]}catch(t){return isDebugBuild()&&p.error("Cannot extract message for event "+getEventDescription(e)),[]}return[]},InboundFilters.prototype._getLastValidUrl=function(e){void 0===e&&(e=[]);for(var t=e.length-1;t>=0;t--){var n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null},InboundFilters.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace)return this._getLastValidUrl(e.stacktrace.frames);var t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?this._getLastValidUrl(t):null}catch(t){return isDebugBuild()&&p.error("Cannot extract url for event "+getEventDescription(e)),null}},InboundFilters.id="InboundFilters",InboundFilters}(),M="?";function createFrame(e,t,n,r){var i={filename:e,function:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}var U=/^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,G=/\((\S*)(?::(\d+))(?::(\d+))\)/,$=[30,function(e){var t=U.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){var n=G.exec(t[2]);n&&(t[2]=n[1],t[3]=n[2],t[4]=n[3])}var r=__read$4(extractSafariExtensionDetails(t[1]||M,t[2]),2),i=r[0];return createFrame(r[1],i,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],q=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,z=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,W=[50,function(e){var t,n=q.exec(e);if(n){if(n[3]&&n[3].indexOf(" > eval")>-1){var r=z.exec(n[3]);r&&(n[1]=n[1]||"eval",n[3]=r[1],n[4]=r[2],n[5]="")}var i=n[3],o=n[1]||M;return o=(t=__read$4(extractSafariExtensionDetails(o,i),2))[0],createFrame(i=t[1],o,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}}],Y=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,K=[40,function(e){var t=Y.exec(e);return t?createFrame(t[2],t[1]||M,+t[3],t[4]?+t[4]:void 0):void 0}],X=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,J=[10,function(e){var t=X.exec(e);return t?createFrame(t[2],t[3]||M,+t[1]):void 0}],V=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Q=[20,function(e){var t=V.exec(e);return t?createFrame(t[5],t[3]||t[4]||M,+t[1],+t[2]):void 0}],extractSafariExtensionDetails=function(e,t){var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:M,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]};function exceptionFromError(e){var t=parseStackFrames(e),n={type:e&&e.name,value:extractMessage(e)};return t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function eventFromError(e){return{exception:{values:[exceptionFromError(e)]}}}function parseStackFrames(e){var t=e.stacktrace||e.stack||"",n=function getPopSize(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Z.test(e.message))return 1}return 0}(e);try{return function createStackParser(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}));return function(e,t){var r,i,o,s;void 0===t&&(t=0);var a=[];try{for(var c=__values$1(e.split("\n").slice(t)),u=c.next();!u.done;u=c.next()){var l=u.value;try{for(var p=(o=void 0,__values$1(n)),d=p.next();!d.done;d=p.next()){var f=(0,d.value)(l);if(f){a.push(f);break}}}catch(e){o={error:e}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return stripSentryFramesAndReverse(a)}}(J,Q,$,K,W)(t,n)}catch(e){}return[]}var Z=/Minified React error #\d+;/i;function extractMessage(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function eventFromUnknownInput(e,t,n,r){var i;if(isErrorEvent(e)&&e.error)return eventFromError(e.error);if(isDOMError(e)||function isDOMException(e){return isBuiltin(e,"DOMException")}(e)){var o=e;if("stack"in e)i=eventFromError(e);else{var s=o.name||(isDOMError(o)?"DOMError":"DOMException"),a=o.message?s+": "+o.message:s;addExceptionTypeValue(i=eventFromString(a,t,n),a)}return"code"in o&&(i.tags=__assign$3(__assign$3({},i.tags),{"DOMException.code":""+o.code})),i}return isError(e)?eventFromError(e):isPlainObject(e)||isEvent(e)?(addExceptionMechanism(i=function eventFromPlainObject(e,t,n){var r={exception:{values:[{type:isEvent(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+extractExceptionKeysForMessage(e)}]},extra:{__serialized__:normalizeToSize(e)}};if(t){var i=parseStackFrames(t);i.length&&(r.stacktrace={frames:i})}return r}(e,t,r),{synthetic:!0}),i):(addExceptionTypeValue(i=eventFromString(e,t,n),""+e,void 0),addExceptionMechanism(i,{synthetic:!0}),i)}function eventFromString(e,t,n){var r={message:e};if(n&&t){var i=parseStackFrames(t);i.length&&(r.stacktrace={frames:i})}return r}var ee,te=getGlobalObject();function getNativeFetchImplementation(){if(ee)return ee;if(isNativeFetch(te.fetch))return ee=te.fetch.bind(te);var e=te.document,t=te.fetch;if(e&&"function"==typeof e.createElement)try{var n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);var r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){isDebugBuild()&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return ee=t.bind(te)}function sendReport(e,t){return"[object Navigator]"===Object.prototype.toString.call(te&&te.navigator)&&"function"==typeof te.navigator.sendBeacon?te.navigator.sendBeacon.bind(te.navigator)(e,t):supportsFetch()?function forget(e){e.then(null,(function(e){console.error(e)}))}(getNativeFetchImplementation()(e,{body:t,method:"POST",credentials:"omit",keepalive:!0})):void 0}function requestTypeToCategory(e){return"event"===e?"error":e}var ne=getGlobalObject(),re=function(){function BaseTransport(e){var t=this;this.options=e,this._buffer=makePromiseBuffer(30),this._rateLimits={},this._outcomes={},this._api=function initAPIDetails(e,t,n){return{initDsn:e,metadata:t||{},dsn:makeDsn(e),tunnel:n}}(e.dsn,e._metadata,e.tunnel),this.url=getStoreEndpointWithUrlEncodedAuth(this._api.dsn),this.options.sendClientReports&&ne.document&&ne.document.addEventListener("visibilitychange",(function(){"hidden"===ne.document.visibilityState&&t._flushOutcomes()}))}return BaseTransport.prototype.sendEvent=function(e){return this._sendRequest(eventToSentryRequest(e,this._api),e)},BaseTransport.prototype.sendSession=function(e){return this._sendRequest(function sessionToSentryRequest(e,t){var n=getSdkMetadataForEnvelopeHeader(t),r="aggregates"in e?"sessions":"session";return{body:serializeEnvelope(createEnvelope(__assign(__assign({sent_at:(new Date).toISOString()},n&&{sdk:n}),!!t.tunnel&&{dsn:dsnToString(t.dsn)}),[[{type:r},e]])),type:r,url:getEnvelopeEndpointWithUrlEncodedAuth(t.dsn,t.tunnel)}}(e,this._api),e)},BaseTransport.prototype.close=function(e){return this._buffer.drain(e)},BaseTransport.prototype.recordLostEvent=function(e,t){var n;if(this.options.sendClientReports){var r=requestTypeToCategory(t)+":"+e;p.log("Adding outcome: "+r),this._outcomes[r]=(null!=(n=this._outcomes[r])?n:0)+1}},BaseTransport.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},Object.keys(e).length){p.log("Flushing outcomes:\n"+JSON.stringify(e,null,2));var t=getEnvelopeEndpointWithUrlEncodedAuth(this._api.dsn,this._api.tunnel),n=function createClientReportEnvelope(e,t,n){return createEnvelope(t?{dsn:t}:{},[[{type:"client_report"},{timestamp:n||k(),discarded_events:e}]])}(Object.keys(e).map((function(t){var n=__read$4(t.split(":"),2),r=n[0];return{reason:n[1],category:r,quantity:e[t]}})),this._api.tunnel&&dsnToString(this._api.dsn));try{sendReport(t,serializeEnvelope(n))}catch(e){p.error(e)}}else p.log("No outcomes to flush")}},BaseTransport.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,i=e.resolve,o=e.reject,s=function eventStatusFromHttpCode(e){return e>=200&&e<300?"success":429===e?"rate_limit":e>=400&&e<500?"invalid":e>=500?"failed":"unknown"}(n.status);this._handleRateLimit(r)&&isDebugBuild()&&p.warn("Too many "+t+" requests, backing off until: "+this._disabledUntil(t)),"success"!==s?o(n):i({status:s})},BaseTransport.prototype._disabledUntil=function(e){var t=requestTypeToCategory(e);return this._rateLimits[t]||this._rateLimits.all},BaseTransport.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},BaseTransport.prototype._handleRateLimit=function(e){var t,n,r,i,o=Date.now(),s=e["x-sentry-rate-limits"],a=e["retry-after"];if(s){try{for(var c=__values$2(s.trim().split(",")),u=c.next();!u.done;u=c.next()){var l=u.value.split(":",2),p=parseInt(l[0],10),d=1e3*(isNaN(p)?60:p);try{for(var f=(r=void 0,__values$2(l[1].split(";"))),h=f.next();!h.done;h=f.next()){var v=h.value;this._rateLimits[v||"all"]=new Date(o+d)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return!0}return!!a&&(this._rateLimits.all=new Date(o+function parseRetryAfterHeader(e,t){void 0===t&&(t=Date.now());var n=parseInt(""+e,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+e);return isNaN(r)?6e4:r-t}(a,o)),!0)},BaseTransport}(),ie=function(e){function FetchTransport(t,n){void 0===n&&(n=getNativeFetchImplementation());var r=e.call(this,t)||this;return r._fetch=n,r}return __extends$1(FetchTransport,e),FetchTransport.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return this.recordLostEvent("ratelimit_backoff",e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var r={body:e.body,method:"POST",referrerPolicy:supportsReferrerPolicy()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new E((function(t,i){n._fetch(e.url,r).then((function(r){var o={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:o,resolve:t,reject:i})})).catch(i)}))})).then(void 0,(function(t){throw t instanceof o?n.recordLostEvent("queue_overflow",e.type):n.recordLostEvent("network_error",e.type),t}))},FetchTransport}(re),oe=function(e){function XHRTransport(){return null!==e&&e.apply(this,arguments)||this}return __extends$1(XHRTransport,e),XHRTransport.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?(this.recordLostEvent("ratelimit_backoff",e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429})):this._buffer.add((function(){return new E((function(t,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:i,headers:o,resolve:t,reject:r})}},i.open("POST",e.url),n.options.headers)Object.prototype.hasOwnProperty.call(n.options.headers,o)&&i.setRequestHeader(o,n.options.headers[o]);i.send(e.body)}))})).then(void 0,(function(t){throw t instanceof o?n.recordLostEvent("queue_overflow",e.type):n.recordLostEvent("network_error",e.type),t}))},XHRTransport}(re),se=function(e){function BrowserBackend(){return null!==e&&e.apply(this,arguments)||this}return __extends$1(BrowserBackend,e),BrowserBackend.prototype.eventFromException=function(e,n){return function eventFromException(e,n,r){var i=eventFromUnknownInput(e,n&&n.syntheticException||void 0,r);return addExceptionMechanism(i),i.level=t.Error,n&&n.event_id&&(i.event_id=n.event_id),resolvedSyncPromise(i)}(e,n,this._options.attachStacktrace)},BrowserBackend.prototype.eventFromMessage=function(e,n,r){return void 0===n&&(n=t.Info),function eventFromMessage(e,n,r,i){void 0===n&&(n=t.Info);var o=eventFromString(e,r&&r.syntheticException||void 0,i);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),resolvedSyncPromise(o)}(e,n,r,this._options.attachStacktrace)},BrowserBackend.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=__assign$3(__assign$3({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(t):supportsFetch()?new ie(t):new oe(t)},BrowserBackend}(D),ae=getGlobalObject(),ce=0;function shouldIgnoreOnError(){return ce>0}function ignoreNextOnError(){ce+=1,setTimeout((function(){ce-=1}))}function wrap(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{var r=e.__sentry_wrapped__;if(r)return r;if(getOriginalFunction(e))return e}catch(t){return e}var sentryWrapped=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((function(e){return wrap(e,t)}));return e.apply(this,i)}catch(e){throw ignoreNextOnError(),withScope((function(n){n.addEventProcessor((function(e){return t.mechanism&&(addExceptionTypeValue(e,void 0,void 0),addExceptionMechanism(e,t.mechanism)),e.extra=__assign$3(__assign$3({},e.extra),{arguments:r}),e})),captureException(e)})),e}};try{for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(sentryWrapped[i]=e[i])}catch(e){}markFunctionWrapped(sentryWrapped,e),addNonEnumerableProperty(e,"__sentry_wrapped__",sentryWrapped);try{Object.getOwnPropertyDescriptor(sentryWrapped,"name").configurable&&Object.defineProperty(sentryWrapped,"name",{get:function(){return e.name}})}catch(e){}return sentryWrapped}function injectReportDialog(e){if(void 0===e&&(e={}),ae.document)if(e.eventId)if(e.dsn){var t=ae.document.createElement("script");t.async=!0,t.src=function getReportDialogEndpoint(e,t){var n=makeDsn(e),r=getBaseApiEndpoint(n)+"embed/error-page/",i="dsn="+dsnToString(n);for(var o in t)if("dsn"!==o)if("user"===o){if(!t.user)continue;t.user.name&&(i+="&name="+encodeURIComponent(t.user.name)),t.user.email&&(i+="&email="+encodeURIComponent(t.user.email))}else i+="&"+encodeURIComponent(o)+"="+encodeURIComponent(t[o]);return r+"?"+i}(e.dsn,e),e.onLoad&&(t.onload=e.onLoad);var n=ae.document.head||ae.document.body;n&&n.appendChild(t)}else isDebugBuild()&&p.error("Missing dsn option in showReportDialog call");else isDebugBuild()&&p.error("Missing eventId option in showReportDialog call")}var ue=function(){function GlobalHandlers(e){this.name=GlobalHandlers.id,this._installFunc={onerror:_installGlobalOnErrorHandler,onunhandledrejection:_installGlobalOnUnhandledRejectionHandler},this._options=__assign$3({onerror:!0,onunhandledrejection:!0},e)}return GlobalHandlers.prototype.setupOnce=function(){Error.stackTraceLimit=50;var e=this._options;for(var t in e){var n=this._installFunc[t];n&&e[t]&&(globalHandlerLog(t),n(),this._installFunc[t]=void 0)}},GlobalHandlers.id="GlobalHandlers",GlobalHandlers}();function _installGlobalOnErrorHandler(){addInstrumentationHandler("error",(function(e){var n=__read$4(getHubAndAttachStacktrace(),2),r=n[0],i=n[1];if(r.getIntegration(ue)){var o=e.msg,s=e.url,a=e.line,c=e.column,u=e.error;if(!(shouldIgnoreOnError()||u&&u.__sentry_own_request__)){var l=void 0===u&&isString(o)?function _eventFromIncompleteOnError(e,t,n,r){var i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,o=isErrorEvent(e)?e.message:e,s="Error",a=o.match(i);a&&(s=a[1],o=a[2]);return _enhanceEventWithInitialFrame({exception:{values:[{type:s,value:o}]}},t,n,r)}(o,s,a,c):_enhanceEventWithInitialFrame(eventFromUnknownInput(u||o,void 0,i,!1),s,a,c);l.level=t.Error,addMechanismAndCapture(r,u,l,"onerror")}}}))}function _installGlobalOnUnhandledRejectionHandler(){addInstrumentationHandler("unhandledrejection",(function(e){var n=__read$4(getHubAndAttachStacktrace(),2),r=n[0],i=n[1];if(r.getIntegration(ue)){var o=e;try{"reason"in e?o=e.reason:"detail"in e&&"reason"in e.detail&&(o=e.detail.reason)}catch(e){}if(shouldIgnoreOnError()||o&&o.__sentry_own_request__)return!0;var s=isPrimitive(o)?function _eventFromRejectionWithPrimitive(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}}(o):eventFromUnknownInput(o,void 0,i,!0);s.level=t.Error,addMechanismAndCapture(r,o,s,"onunhandledrejection")}}))}function _enhanceEventWithInitialFrame(e,t,n,r){var i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,p=isString(t)&&t.length>0?t:function getLocationHref(){var e=getGlobalObject();try{return e.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:p,function:"?",in_app:!0,lineno:l}),e}function globalHandlerLog(e){isDebugBuild()&&p.log("Global Handler attached: "+e)}function addMechanismAndCapture(e,t,n,r){addExceptionMechanism(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function getHubAndAttachStacktrace(){var e=getCurrentHub(),t=e.getClient();return[e,t&&t.getOptions().attachStacktrace]}var le=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],pe=function(){function TryCatch(e){this.name=TryCatch.id,this._options=__assign$3({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return TryCatch.prototype.setupOnce=function(){var e=getGlobalObject();this._options.setTimeout&&fill(e,"setTimeout",_wrapTimeFunction),this._options.setInterval&&fill(e,"setInterval",_wrapTimeFunction),this._options.requestAnimationFrame&&fill(e,"requestAnimationFrame",_wrapRAF),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&fill(XMLHttpRequest.prototype,"send",_wrapXHR);var t=this._options.eventTarget;t&&(Array.isArray(t)?t:le).forEach(_wrapEventTarget)},TryCatch.id="TryCatch",TryCatch}();function _wrapTimeFunction(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=wrap(r,{mechanism:{data:{function:getFunctionName(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function _wrapRAF(e){return function(t){return e.call(this,wrap(t,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(e)},handled:!0,type:"instrument"}}))}}function _wrapXHR(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,i=["onload","onerror","onprogress","onreadystatechange"];return i.forEach((function(e){e in r&&"function"==typeof r[e]&&fill(r,e,(function(t){var n={mechanism:{data:{function:e,handler:getFunctionName(t)},handled:!0,type:"instrument"}},r=getOriginalFunction(t);return r&&(n.mechanism.data.handler=getFunctionName(r)),wrap(t,n)}))})),e.apply(this,t)}}function _wrapEventTarget(e){var t=getGlobalObject(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(fill(n,"addEventListener",(function(t){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=wrap(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:getFunctionName(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,wrap(r,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(r),target:e},handled:!0,type:"instrument"}}),i)}})),fill(n,"removeEventListener",(function(e){return function(t,n,r){var i=n;try{var o=i&&i.__sentry_wrapped__;o&&e.call(this,t,o,r)}catch(e){}return e.call(this,t,i,r)}})))}var de=function(){function Breadcrumbs(e){this.name=Breadcrumbs.id,this._options=__assign$3({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return Breadcrumbs.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&getCurrentHub().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:getEventDescription(e)},{event:e})},Breadcrumbs.prototype.setupOnce=function(){this._options.console&&addInstrumentationHandler("console",_consoleBreadcrumb),this._options.dom&&addInstrumentationHandler("dom",function _domBreadcrumb(e){function _innerDomBreadcrumb(t){var n,r="object"==typeof e?e.serializeAttribute:void 0;"string"==typeof r&&(r=[r]);try{n=t.event.target?htmlTreeAsString(t.event.target,r):htmlTreeAsString(t.event,r)}catch(e){n="<unknown>"}0!==n.length&&getCurrentHub().addBreadcrumb({category:"ui."+t.name,message:n},{event:t.event,name:t.name,global:t.global})}return _innerDomBreadcrumb}(this._options.dom)),this._options.xhr&&addInstrumentationHandler("xhr",_xhrBreadcrumb),this._options.fetch&&addInstrumentationHandler("fetch",_fetchBreadcrumb),this._options.history&&addInstrumentationHandler("history",_historyBreadcrumb)},Breadcrumbs.id="Breadcrumbs",Breadcrumbs}();function _consoleBreadcrumb(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:severityFromString(e.level),message:safeJoin(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(safeJoin(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}getCurrentHub().addBreadcrumb(t,{input:e.args,level:e.level})}function _xhrBreadcrumb(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,i=t.status_code,o=t.body;getCurrentHub().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:i},type:"http"},{xhr:e.xhr,input:o})}else;}function _fetchBreadcrumb(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?getCurrentHub().addBreadcrumb({category:"fetch",data:e.fetchData,level:t.Error,type:"http"},{data:e.error,input:e.args}):getCurrentHub().addBreadcrumb({category:"fetch",data:__assign$3(__assign$3({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))}function _historyBreadcrumb(e){var t=getGlobalObject(),n=e.from,r=e.to,i=parseUrl(t.location.href),o=parseUrl(n),s=parseUrl(r);o.path||(o=i),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),getCurrentHub().addBreadcrumb({category:"navigation",data:{from:n,to:r}})}var fe=function(){function LinkedErrors(e){void 0===e&&(e={}),this.name=LinkedErrors.id,this._key=e.key||"cause",this._limit=e.limit||5}return LinkedErrors.prototype.setupOnce=function(){addGlobalEventProcessor((function(e,t){var n=getCurrentHub().getIntegration(LinkedErrors);return n?function _handler(e,t,n,r){if(!(n.exception&&n.exception.values&&r&&isInstanceOf(r.originalException,Error)))return n;var i=_walkErrorTree(t,r.originalException,e);return n.exception.values=__spread$4(i,n.exception.values),n}(n._key,n._limit,e,t):e}))},LinkedErrors.id="LinkedErrors",LinkedErrors}();function _walkErrorTree(e,t,n,r){if(void 0===r&&(r=[]),!isInstanceOf(t[n],Error)||r.length+1>=e)return r;var i=exceptionFromError(t[n]);return _walkErrorTree(e,t[n],n,__spread$4([i],r))}var he=getGlobalObject(),ve=function(){function UserAgent(){this.name=UserAgent.id}return UserAgent.prototype.setupOnce=function(){addGlobalEventProcessor((function(e){if(getCurrentHub().getIntegration(UserAgent)){if(!he.navigator&&!he.location&&!he.document)return e;var t=e.request&&e.request.url||he.location&&he.location.href,n=(he.document||{}).referrer,r=(he.navigator||{}).userAgent,i=__assign$3(__assign$3(__assign$3({},e.request&&e.request.headers),n&&{Referer:n}),r&&{"User-Agent":r}),o=__assign$3(__assign$3({},t&&{url:t}),{headers:i});return __assign$3(__assign$3({},e),{request:o})}return e}))},UserAgent.id="UserAgent",UserAgent}(),_e=function(){function Dedupe(){this.name=Dedupe.id}return Dedupe.prototype.setupOnce=function(e,t){e((function(e){var n=t().getIntegration(Dedupe);if(n){try{if(function _shouldDropEvent(e,t){if(!t)return!1;if(function _isSameMessageEvent(e,t){var n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!_isSameFingerprint(e,t))return!1;if(!_isSameStacktrace(e,t))return!1;return!0}(e,t))return!0;if(function _isSameExceptionEvent(e,t){var n=_getExceptionFromEvent(t),r=_getExceptionFromEvent(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!_isSameFingerprint(e,t))return!1;if(!_isSameStacktrace(e,t))return!1;return!0}(e,t))return!0;return!1}(e,n._previousEvent))return p.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return n._previousEvent=e}return n._previousEvent=e}return e}))},Dedupe.id="Dedupe",Dedupe}();function _isSameStacktrace(e,t){var n=_getFramesFromEvent(e),r=_getFramesFromEvent(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i],s=n[i];if(o.filename!==s.filename||o.lineno!==s.lineno||o.colno!==s.colno||o.function!==s.function)return!1}return!0}function _isSameFingerprint(e,t){var n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function _getExceptionFromEvent(e){return e.exception&&e.exception.values&&e.exception.values[0]}function _getFramesFromEvent(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}else if(e.stacktrace)return e.stacktrace.frames}var ge,ye,me,be=function(e){function BrowserClient(t){void 0===t&&(t={});return t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:I}],version:I},e.call(this,se,t)||this}return __extends$1(BrowserClient,e),BrowserClient.prototype.showReportDialog=function(e){void 0===e&&(e={}),getGlobalObject().document&&(this._isEnabled()?injectReportDialog(__assign$3(__assign$3({},e),{dsn:e.dsn||this.getDsn()})):p.error("Trying to call showReportDialog with Sentry Client disabled"))},BrowserClient.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",e.prototype._prepareEvent.call(this,t,n,r)},BrowserClient.prototype._sendEvent=function(t){var n=this.getIntegration(de);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},BrowserClient}(j),Ee=[new A,new L,new pe,new de,new ue,new fe,new _e,new ve];function startSessionOnHub(e){e.startSession({ignoreDuration:!0}),e.captureSession()}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))}function __classPrivateFieldGet(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function __classPrivateFieldSet(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}ge=new WeakMap,ye=new WeakMap,me=new WeakMap,function init(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=Ee),void 0===e.release){var t=getGlobalObject();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0),function initAndBind(e,t){!0===t.debug&&p.enable();var n=getCurrentHub(),r=n.getScope();r&&r.update(t.initialScope);var i=new e(t);n.bindClient(i)}(be,e),e.autoSessionTracking&&function startSessionTracking(){if(void 0===getGlobalObject().document)return void(isDebugBuild()&&p.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));var e=getCurrentHub();if(!e.captureSession)return;startSessionOnHub(e),addInstrumentationHandler("history",(function(e){var t=e.from,n=e.to;void 0!==t&&t!==n&&startSessionOnHub(getCurrentHub())}))}()}({dsn:"https://4ae9999809ef418b819b16bf383e5fd0@o143001.ingest.sentry.io/5828167",maxBreadcrumbs:100,attachStacktrace:!0});const Se=new class KepubifyApp{constructor(t){Object.defineProperty(this,"kepubify",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ge.set(this,void 0),ye.set(this,void 0),me.set(this,!1);const n=document.querySelector(t);this.kepubify=new e.Kepubify,__classPrivateFieldSet(this,ye,{el:n,title:n.querySelector(".try__pane--files > .try__pane__title"),files:n.querySelector(".try__pane--files > .try__pane__contents"),options:n.querySelector(".try__pane--options > .try__pane__contents > form.options")},"f")}start(){return __awaiter(this,void 0,void 0,(function*(){if(__classPrivateFieldGet(this,me,"f"))return;addBreadcrumb({message:"Initializing kepubify"}),__classPrivateFieldGet(this,ye,"f").title.textContent="Downloading kepubify...";try{__classPrivateFieldSet(this,ge,yield this.kepubify.init(((e,t,n)=>{__classPrivateFieldGet(this,ye,"f").title.textContent=e?`Downloading kepubify... ${(t/1e6).toFixed(2)} / ${(n/1e6).toFixed(2)} MB (${(t/n*100).toFixed(0)}%)`:t?`Downloading kepubify... ${(t/1e6).toFixed(2)} MB`:"Downloading kepubify..."})),"f")}catch(e){throw __classPrivateFieldGet(this,ye,"f").title.textContent=`Failed to download kepubify: ${e}`,__classPrivateFieldGet(this,ye,"f").title.title=`${e}`,new Error(`failed to initialize kepubify: ${e}`)}__classPrivateFieldGet(this,ye,"f").title.textContent=`Kepubify ${__classPrivateFieldGet(this,ge,"f")}`,addBreadcrumb({message:`Initialized kepubify ${__classPrivateFieldGet(this,ge,"f")}`});const e=__classPrivateFieldGet(this,ye,"f").files.appendChild(document.createElement("button"));e.classList.add("file"),e.classList.add("file--placeholder"),e.title="Browse";const t=e.appendChild(document.createElement("div"));t.classList.add("file__info");const n=t.appendChild(document.createElement("span"));n.classList.add("file__info__name"),n.textContent=window.matchMedia("(pointer: coarse)").matches?"Choose a file...":"Drop your files here, or click to browse...",__classPrivateFieldGet(this,ye,"f").hint=__classPrivateFieldGet(this,ye,"f").files.appendChild(document.createElement("div")),__classPrivateFieldGet(this,ye,"f").hint.classList.add("hint"),__classPrivateFieldGet(this,ye,"f").hint.classList.add("hint--hidden"),__classPrivateFieldGet(this,ye,"f").hint.textContent="Each file will turn green when the conversion is complete. Click the blue filename link to download the converted file.",__classPrivateFieldGet(this,ye,"f").placeholder=e,__classPrivateFieldGet(this,ye,"f").placeholder.addEventListener("click",(()=>{const e=document.createElement("input");e.type="file",e.accept="application/epub+zip",e.multiple=!0,e.addEventListener("input",(()=>{if(e.files)for(let t=0;t<e.files.length;t++)this.enqueue(e.files[t])})),e.click()}));for(const e of["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"])__classPrivateFieldGet(this,ye,"f").files.addEventListener(e,(t=>{var n;if("drop"==e){const e=null===(n=t.dataTransfer)||void 0===n?void 0:n.files;if(e)for(let t=0;t<e.length;t++)this.enqueue(e[t])}"dragover"!=e&&"dragenter"!=e||__classPrivateFieldGet(this,ye,"f").files.classList.add("dragover"),"dragend"!=e&&"dragleave"!=e&&"drop"!=e||__classPrivateFieldGet(this,ye,"f").files.classList.remove("dragover"),t.preventDefault(),t.stopPropagation()}));__classPrivateFieldSet(this,me,!0,"f")}))}enqueue(e){var t;return __awaiter(this,void 0,void 0,(function*(){addBreadcrumb({message:`Enqueuing ${e.name} (size=${e.size}, type=${e.type})`}),__classPrivateFieldGet(this,ye,"f").hint.classList.remove("hint--hidden");const n=__classPrivateFieldGet(this,ye,"f").placeholder.insertAdjacentElement("beforebegin",document.createElement("div"));n.classList.add("file"),n.setAttribute("tabindex","0");const r=n.appendChild(document.createElement("div"));r.classList.add("file__info");const i=r.appendChild(document.createElement("span"));i.classList.add("file__info__progress");const o=r.appendChild(document.createElement("a"));let s,a;o.classList.add("file__info__name"),o.textContent=e.name;try{a=this.config,s=yield this.kepubify.kepubify(e,a,((e,t)=>{i.style.width=100*(t?e/t:0)+"%"})),i.style.width="100%",i.classList.add("file__info__progress--success")}catch(t){i.style.width="100%",i.classList.add("file__info__progress--error");const o=n.appendChild(document.createElement("div"));o.classList.add("file__status"),o.textContent=`${t}`;const s=r.appendChild(document.createElement("button"));return s.textContent="",s.title="Remove",s.addEventListener("click",(()=>{n.remove()})),void captureException(t,{extra:{file:{name:null==e?void 0:e.name,size:null==e?void 0:e.size,type:null==e?void 0:e.type},worker:{version:__classPrivateFieldGet(this,ge,"f")},config:a}})}addBreadcrumb({message:`Finished ${e.name} (${s.size} bytes)`});try{o.href=URL.createObjectURL(new Blob([s],{type:"application/epub+zip"})),o.download=e.name.replace(/([.]epub)?$/,".kepub.epub"),o.textContent=o.download;const t=r.appendChild(document.createElement("button"));t.textContent="",t.title="Remove",t.addEventListener("click",(()=>{n.remove(),URL.revokeObjectURL(o.href)}))}catch(t){i.style.width="100%",i.classList.add("file__info__progress--error");const r=n.appendChild(document.createElement("div"));return r.classList.add("file__status"),r.textContent=`Error: failed to save file: ${t}`,void captureException(new Error(`failed to create download link: ${t}`),{extra:{file:{name:e.name,size:e.size,type:e.type},kepub:{size:s.size},worker:{version:__classPrivateFieldGet(this,ge,"f")}}})}null===(t=window.goatcounter)||void 0===t||t.count({path:"kepubify-wasm-convert",event:!0})}))}get config(){const t=new e.KepubifyConfig;switch(__classPrivateFieldGet(this,ye,"f").options["smarten-punctuation"].value){case"off":break;case"on":t.smartypants()}switch(__classPrivateFieldGet(this,ye,"f").options["dummy-titlepage"].value){case"auto":break;case"always":t.dummyTitlepage(!0);break;case"never":t.dummyTitlepage(!1)}switch(""!=__classPrivateFieldGet(this,ye,"f").options["custom-css"].value.trim()&&t.addCSS(__classPrivateFieldGet(this,ye,"f").options["custom-css"].value),__classPrivateFieldGet(this,ye,"f").options.hyphenation.value){case"default":break;case"enable":t.hyphenate(!0);break;case"disable":t.hyphenate(!1)}switch(__classPrivateFieldGet(this,ye,"f").options["full-screen-fixes"].value){case"off":break;case"on":t.fullScreenFixes()}return t}}("#try");return Se.start().catch((e=>captureException(new Error(`failed to start kepubify: ${e}`)))),document.getElementById("unsupported-browser").style.display="none",Se}(kepubify);
//# sourceMappingURL=kepubify_try.js.map
